_target_: src.data.datamodule.DataModule

defaults:
  - corruption@train_dataset.corruption: low_resolution
  - corruption@val_dataset.corruption: low_resolution

train_dataset:
  _target_: src.data.corruptions.CorruptedDataset
  _partial_: True

  dataset:
    _target_: src.data.cifar10.CIFAR10

    root: ${core.data_dir}/cifar10
    train: True

    transform:
      _target_: torchvision.transforms.v2.Compose
      transforms:
        - _target_: torchvision.transforms.v2.ToImage
        - _target_: torchvision.transforms.v2.ToDtype
          dtype:
            _target_: torch.__dict__.get # workaround, see: https://github.com/facebookresearch/hydra/issues/2140
            _args_:
              - float32
          scale: True
        - _target_: torchvision.transforms.v2.Normalize
          mean: [0.5, 0.5, 0.5]
          std: [0.5, 0.5, 0.5]

val_dataset:
  _target_: src.data.corruptions.CorruptedDataset
  _partial_: True

  dataset:
    _target_: src.data.cifar10.CIFAR10

    root: ${core.data_dir}/cifar10
    train: False

    transform:
      _target_: torchvision.transforms.v2.Compose
      transforms:
        - _target_: torchvision.transforms.v2.ToImage
        - _target_: torchvision.transforms.v2.ToDtype
          dtype:
            _target_: torch.__dict__.get # workaround, see: https://github.com/facebookresearch/hydra/issues/2140
            _args_:
              - float32
          scale: True
        - _target_: torchvision.transforms.v2.Normalize
          mean: [0.5, 0.5, 0.5]
          std: [0.5, 0.5, 0.5]

batch_size: 32
num_workers: 8
pin_memory: True
